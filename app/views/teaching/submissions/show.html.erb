<% title 'Grading' %>

<h2>
  <%= current_submission.student.full_name %>'s
  Homework
  <button id="annotate">Annotate Selection</button>
</h2>

<div id="submission-text">
  <div class="text">
    <%= current_submission.text %>
  </div>
</div>

<%= javascript_include_tag 'selection' %>

<script>
$(function() {
  function postAnnotation() {
      $.ajax({
        url: url,
        type: 'post',
        contentType: 'application/json; charset=utf-8',
        data: JSON.stringify(filterParams()),
        dataType: 'json',
        beforeSend: function(request) {
          this.headers = {'X-Http-Method-Override': sekretMethod}
        },
        success: function(data) {
          window.location = data.redirect;
        },
        error: function() {
          $('#filter-save').show();
          $('#filter-saving').hide();
          alert('Something went wrong...');
        }
      });
    }
  }

  $('#annotate').click(function() {
    alert(HW.selection.text());
  });

    // IE
    // document.body.createTextRange()
    // document.selection.createRange().htmlText
});
</script>
